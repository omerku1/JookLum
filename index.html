<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>קונג פו גמל שלמה דרומי ממקדש יער הבמבוק/title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700&display=swap" rel="stylesheet">
  <!-- Chosen Palette: Calm Harmony (Warm Neutrals: stone/amber, Accents: terracotta, deep emerald) -->
  <!-- Application Structure Plan: A thematic single-page application with a sticky top navigation bar (History, Lineage, Principles, Curriculum, Masters). This structure organizes the dense report information into digestible, non-linear topics, allowing users to explore based on interest rather than report order. Key interactions include a clickable timeline for history, an interactive HTML/CSS lineage tree to show relationships, toggleable cards for principles, and structured tables for the curriculum, making the data explorable rather than static. This design prioritizes user-driven discovery over passive reading. -->
  <!-- Visualization & Content Choices: 1. History -> Goal: Show Change -> Viz: Interactive Timeline (HTML/CSS/JS) -> Interaction: Click points to reveal text -> Justification: More engaging than a text block. 2. Lineage -> Goal: Show Relationships -> Viz: HTML/CSS Diagram (vertical stack) -> Interaction: Click nodes to reveal inline details -> Justification: Clean, simple, and clear hierarchy without complex lines. 3. Curriculum -> Goal: Organize/Inform -> Viz: HTML Tables -> Interaction: View different form sets -> Justification: Tables provide the specific details requested by the user. 4. Masters -> Goal: Show Global Spread -> Viz: Grid of Cards -> Interaction: Click for details -> Justification: Simple, clear way to present current lineage holders. -->
  <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
  <style>
    body {
      font-family: 'Assistant', sans-serif;
    }
    .nav-link.active {
      font-weight: 700;
      color: #7f1d1d; /* text-green-900 */
    }
    .tree-node {
      border: 2px solid #d6d3d1; /* stone-300 */
      padding: 0.5rem 1rem;
      width: 7rem; /* Fixed width for all nodes */
      min-height: 4rem; /* Minimum height */
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      border-radius: 0.5rem;
      background-color: white;
      transition: all 0.3s;
      cursor: pointer;
      z-index: 10;
    }
    .tree-node:hover {
      background-color: #f5f5f4; /* stone-100 */
      border-color: #7f1d1d;
    }
    .tree-node.active {
      background-color: #fecaca; /* red-200 */
      border-color: #7f1d1d;
    }
  </style>
</head>
<body class="bg-stone-50 text-stone-800">

<header class="bg-stone-100 shadow-md sticky top-0 z-50">
  <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <div class="flex items-center">
        <span class="font-bold text-xl text-green-900">קונג פו - גמל שלמה דרומי</span>
      </div>
      <div class="hidden md:block">
        <div class="ml-10 flex items-baseline space-x-4 space-x-reverse">
          <a href="#hero" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-stone-700 hover:bg-stone-200">ראשי</a>
          <a href="#history" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-stone-700 hover:bg-stone-200">היסטוריה</a>
          <a href="#lineage" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-stone-700 hover:bg-stone-200">שושלת</a>
          <a href="#principles" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-stone-700 hover:bg-stone-200">עקרונות</a>
          <a href="#curriculum" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-stone-700 hover:bg-stone-200">תכנית לימודים</a>
          <a href="#masters" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-stone-700 hover:bg-stone-200">מאסטרים</a>
        </div>
      </div>
      <div class="-mr-2 flex md:hidden">
        <button id="mobile-menu-button" type="button" class="bg-stone-200 inline-flex items-center justify-center p-2 rounded-md text-stone-600 hover:text-stone-800 hover:bg-stone-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-200 focus:ring-red-800" aria-controls="mobile-menu" aria-expanded="false">
          <span class="sr-only">פתח תפריט ראשי</span>
          <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
          <svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
    </div>
  </nav>
  <div class="md:hidden hidden" id="mobile-menu">
    <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
      <a href="#hero" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-stone-700 hover:bg-stone-200">ראשי</a>
      <a href="#history" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-stone-700 hover:bg-stone-200">היסטוריה</a>
      <a href="#lineage" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-stone-700 hover:bg-stone-200">שושלת</a>
      <a href="#principles" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-stone-700 hover:bg-stone-200">עקרונות</a>
      <a href="#curriculum" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-stone-700 hover:bg-stone-200">תכנית לימודים</a>
      <a href="#masters" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-stone-700 hover:bg-stone-200">מאסטרים</a>
    </div>
  </div>
</header>

<main>
  <!-- Hero Section -->
  <section id="hero" class="pt-20 pb-16 bg-stone-200">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h1 class="text-4xl md:text-6xl font-extrabold text-green-900 tracking-tight">גמל שלמה דרומי</h1>
      <h2 class="mt-4 text-2xl md:text-3xl font-semibold text-red-900">Jook Lum Gee Tong Long Pai</h2>
      <p class="mt-4 max-w-2xl mx-auto text-lg md:text-xl text-stone-700">חקירה אינטראקטיבית של ההיסטוריה, הפילוסופיה והטכניקות של קונג פו גמל שלמה דרומי ממקדש יער הבמבוק.</p>
    </div>
  </section>

  <!-- History Section -->
  <section id="history" class="py-16 bg-stone-100">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-center mb-2 text-green-900">היסטוריה</h2>
      <p class="text-center text-lg text-stone-600 mb-12 max-w-3xl mx-auto">כאן נחשף סיפורה של השיטה, החל מהמקורות האגדיים במנזר סיני, דרך התפתחותה בקרב קהילת ההאקה, ועד להפצתה בעולם על ידי מאסטרים מרכזיים. לחצו על נקודות ציון בציר הזמן כדי לגלות עוד.</p>
      <div id="timeline-container" class="relative">
      </div>
      <div id="timeline-details" class="mt-8 p-6 bg-white rounded-lg shadow-lg text-center transition-opacity duration-500 opacity-0">
      </div>
    </div>
  </section>

  <!-- Lineage Section -->
  <section id="lineage" class="py-16 bg-stone-50">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-center mb-2 text-green-900">שושלת</h2>
      <p class="text-center text-lg text-stone-600 mb-12 max-w-3xl mx-auto">עץ השושלת מציג את העברת הידע מדור לדור. כל שם מייצג חוליה בשרשרת, מאסטר שהטביע את חותמו על האמנות. לחצו על השמות המרכזיים כדי ללמוד על תרומתם הייחודית.</p>
      <div id="lineage-tree" class="flex flex-col items-center space-y-2 text-center">
      </div>
      <div id="lineage-details" class="mt-8 p-6 bg-white rounded-lg shadow-lg text-center transition-opacity duration-500 opacity-0 max-w-2xl mx-auto">
      </div>
    </div>
  </section>

  <!-- Principles Section -->
  <section id="principles" class="py-16 bg-stone-100">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-center mb-2 text-green-900">עקרונות הליבה</h2>
      <p class="text-center text-lg text-stone-600 mb-12 max-w-3xl mx-auto">ג'וק לאם היא יותר מסדרת תנועות; זוהי מערכת שלמה הבנויה על עקרונות פילוסופיים וטקטיים עמוקים.  <br>סעיף זה מפרק את רעיונות היסוד המנחים כל מתרגל בשיטה.</p>
      <div id="principles-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      </div>
    </div>
  </section>

  <!-- Curriculum Section -->
  <section id="curriculum" class="py-16 bg-stone-50">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-center mb-2 text-green-900">תכנית הלימודים (קאטות)</h2>
      <p class="text-center text-lg text-stone-600 mb-12 max-w-3xl mx-auto">תכנית הלימודים של שושלת לאם סאנג היא מסע מובנה מהיסודות ועד לטכניקות המתקדמות ביותר.  <br>כאן תוכלו לחקור את הקאטות המרכזיות, להבין את משמעות שמותיהן ואת תפקידן בהתפתחות התלמיד.</p>
      <div id="forms-container" class="mt-8">
      </div>
    </div>
  </section>

  <!-- Masters Section -->
  <section id="masters" class="py-16 bg-stone-100">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-center mb-2 text-green-900">מאסטרים עכשוויים</h2>
      <p class="text-center text-lg text-stone-600 mb-12 max-w-3xl mx-auto">כיום, אמנות הג'וק לאם מתורגלת ברחבי העולם בזכותם של מאסטרים הממשיכים את השושלת. <br> חלק זה מציג כמה מהדמויות הבולטות המלמדות כיום ומפיצות את הידע של יער הבמבוק.</p>
      <div id="masters-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      </div>
    </div>
  </section>

</main>

<footer class="bg-stone-800 text-stone-300 py-6">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">

  </div>
</footer>

<script>
  document.addEventListener('DOMContentLoaded', function () {

    const appData = {
      timeline: [
        { year: 'מאה 18-19', title: 'ייסוד השיטה', content: 'על פי המסורת, נזיר שאולין בשם סוֹם דַאט מייסד את השיטה לאחר שצפה בגמל שלמה מביס יריב גדול ממנו. המיתוס מבסס את עקרון הליבה: שימוש במיומנות ודיוק כדי לגבור על כוח.' },
        { year: 'תחילת מאה 20', title: 'היציאה מהמנזר', content: 'לִי סִיֵם סִי, תלמידו של סוֹם דַאט, מוציא את האמנות מחוץ לחומות המנזר ומתחיל ללמדה לציבור הרחב בדרום סין.' },
        { year: '1929', title: 'בית הספר הציבורי הראשון', content: 'צ\'וּנְג יוּ צ\'וּנְג, תלמידו של לי סים סי, פותח את בית הספר הציבורי הראשון לאמנות בפינגשאן, ובכך מבסס את שמה באופן רשמי: Kwong Sai Jook Lum Gee Tong Long Pai.' },
        { year: 'שנות ה-30 וה-40', title: 'פיצול השושלת בהונג קונג', content: 'שני תלמידים בולטים של צ\'ונג, וונג יוק-קונג ולאם סאנג, מפתחים דגשים שונים: וונג, הגדול והחזק, מדגיש כוח פיזי. לאם, קטן הגוף, מתמקד ברכות, הסטה וכוח פנימי.' },
        { year: 'שנות ה-40', title: 'המסע למערב', content: 'נפילת הונג קונג לידי היפנים ב-1942 הייתה רגע מכונן. מתוך חשש לשלומו, דאגו לשלוח את לאם סאנג על ספינה לליברפול, אנגליה. במהלך המסע, הספינה הופצצה על ידי הגרמנים. לאם סאנג ניצל וחולץ על ידי ספינת מלחמה של הצי האמריקאי, שהייתה בדרכה לארה"ב. כך, באופן מקרי לחלוטין, הגיעה השיטה לאמריקה במקום לאירופה, אירוע המדגים כיצד סכסוך עולמי עיצב את נתיב התפשטותה של האמנות.' },
        { year: 'שנות ה-50 ואילך', title: 'התבססות גלובלית', content: 'לאם סאנג מתחיל ללמד בניו יורק. תלמידיו, כמו הנרי פו יי וג\'ין פון מארק, מפיצים את האמנות ברחבי ארה"ב, אירופה ושאר העולם, ומייסדים את השושלות המוכרות כיום.' }
      ],
      lineage: {
        name: 'סוֹם דַאט',
        id: 'som-dot',
        details: 'המייסד האגדי של השיטה. נזיר ממקדש ג\'וק לאם.',
        children: [
          {
            name: 'לִי סִיֵם סִי',
            id: 'lee-siem-see',
            details: 'הוציא את האמנות מהמנזר. הדגיש את ההיבט ה"רך" של השיטה.',
            children: [
              {
                name: 'צ\'וּנְג יוּ צ\'וּנְג',
                id: 'cheung-yiu-chung',
                details: 'פתח את בית הספר הציבורי הראשון. מורם של וונג יוק-קונג ולאם סאנג.',
                children: [
                  {
                    name: 'וונג יוק-קונג',
                    id: 'wong-yuk-kong',
                    details: '<b>הענף ה"קשה":</b> תלמיד בכיר, איש גדול וחזק. הדגיש כוח ואימון עם משקולות. השפעתו נותרה חזקה בהונג קונג ובסין.',
                    children: []
                  },
                  {
                    name: 'לאם סאנג',
                    id: 'lam-sang',
                    details: '<b>הענף ה"רך":</b> תלמיד קטן גוף שלמד גם ישירות מלי סים סי. הדגיש רכות, הסטה וכוח פנימי (ג\'ינג). הביא את השיטה לארה"ב.',
                    children: [
                      { name: 'הנרי פו יי', id: 'henry-poo-yee', details: 'תלמיד בכיר של לאם סאנג, ייסד את פדרציית CKFA והפיץ את האמנות בעולם. מורו של סיפו ספיר טל.', children: [] },
                      { name: 'ג\'ין פון מארק', id: 'gin-foon-mark', details: 'תלמיד בכיר של לאם סאנג, התיישב במינסוטה. נודע בשילוב עמוק של פילוסופיית זן/טאואיזם.', children: [] }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      principles: [
        { title: 'אגרוף עין הפניקס (鳳眼拳)', content: 'טכניקת היד הייחודית של השיטה. מפרק האצבע המורה בולט קדימה, ומרכז את כל כוח המכה בנקודה קטנה וחודרנית, אידיאלית לפגיעה בנקודות תורפה.' },
        { title: 'קשה ורך (硬功/柔功)', content: 'השיטה בנויה על דואליות: נוֹנְג קוּנְג (אימון קשה) לבניית "גוף ברזל", ויוּאֵל קוּנְג (אימון רך) לטיפוח אנרגיה פנימית, נשימה ורגישות.' },
        { title: 'אסטרטגיה תגובתית', content: 'המתרגל שואף לפתות את היריב לתקוף, לספוג או להסיט את המכה הראשונה, ולהגיב במטר של מכות נגד הרסניות לטווח קרוב. "אם אינך תוקף, לא אתקוף."' },
        { title: 'תחושה (רגישות)', content: 'המרכיב החשוב ביותר. פיתוח היכולת "להתחבר" ליריב, לחוש את כוונותיו וחולשותיו דרך מגע, ללא תלות בראייה. מתורגל רבות ב"ידיים דביקות".' },
        { title: 'עקרונות הכוח', content: 'האמנות משתמשת בשמונה עקרונות כוח: בליעה, יריקה, חיתוך, ציפה, הידבקות, שקיעה, תפיסה וסיבוב. עקרונות אלו מתארים כיצד לנהל כוח ותנועה בקרב.' },
        { title: 'פילוסופיית הזן', content: 'השיטה שואבת השראה מבודהיזם וטאואיזם. המטרה אינה רק לחימה, אלא שינוי תודעתי והרחבת המודעות. "היה כבמבוק" - חזק אך גמיש.' }
      ],
      forms: {
        foundations: [
          { name: 'סוֹם בּוֹ גִין', englishName: 'Som Bo Gin (三步箭)', translation: 'שלושה צעדי חץ', description: 'התבנית הראשונה והחשובה ביותר, "הקוד הגנטי" של השיטה. תבנית צ\'י קונג קשה המלמדת יציבה, מבנה גוף, נשימה ויצירת כוח מתפרץ (Fa-ging).' },
          { name: 'סוֹם בּוֹ פַאן נַאן צ\'וֹי', englishName: 'Som Bo Fan Nan Choi (三步分南北捶)', translation: 'שלושה צעדים מחלקים דרום-צפון', description: 'תבנית המגשרת בין היסודות ליישומים הטקטיים. מלמדת כיצד ליישם את הכוח שנלמד בסום בו גין בכל הכיוונים וה"שערים" (אפיקי תקיפה).' }
        ],
        shortHammers: [
          { name: 'Jo Mun Jo Cheui (左門左捶)', translation: 'שער שמאלי, אגרוף שמאלי' },
          { name: 'Jo Mun Yau Cheui (左門右捶)', translation: 'שער שמאלי, אגרוף ימני' },
          { name: 'Jo Mun Saan Mun (左門閂門)', translation: 'שער שמאלי, סגירת השער' },
          { name: 'Yau Mun Jo Cheui (右門左捶)', translation: 'שער ימני, אגרוף שמאלי' },
          { name: 'Yau Mun Yau Cheui (右門右捶)', translation: 'שער ימני, אגרוף ימני' },
          { name: 'Jung Mun Cheui (中門捶)', translation: 'אגרוף שער האמצע' },
          { name: 'Pin Cheui (鞭捶)', translation: 'אגרוף שוט' }
        ],
        longHammers: [
          { name: 'Jit Cheui (截捶)', translation: 'אגרוף מיירט' },
          { name: 'Yat Cheui (一捶)', translation: 'האגרוף הראשון / אגרוף מאחד' },
          { name: 'Saam Lo Lin Gwan (三路連環)', translation: 'שרשרת רציפה בשלושה כיוונים' },
          { name: 'Gau Cheui (勾捶)', translation: 'אגרוף וו' },
          { name: 'Daan Cheui (單捶)', translation: 'אגרוף בודד' },
          { name: 'Gwo Cheui (掛捶)', translation: 'אגרוף תלוי' }
        ]
      },
      masters: [
        { name: 'גרנדמאסטר הנרי פו יי (1939-2018)', location: 'ארה"ב, ישראל, אירופה', lineage: 'לאם סאנג', description: 'מייסד פדרציית CKFA, נודע בהוראת ההיבטים הלחימתיים והרפואיים. מורו של סיפו ספיר טל המלמד בישראל ובאירופה.' },
        { name: 'גרנדמאסטר ג\'ין פון מארק (1927-2018)', location: 'מינסוטה, ארה"ב', lineage: 'לאם סאנג', description: 'תלמיד בכיר, ידוע בשילוב עמוק של פילוסופיית זן וטאואיזם. תלמידיו מלמדים ברחבי העולם, כולל באיטליה ורוסיה.' },
        { name: ' נורמן צ\'ין', location: 'ניו יורק, ארה"ב', lineage: 'לאם סאנג', description: 'תלמיד בכיר הממשיך להוביל את בית הספר ההיסטורי במועדון האתלטיקה של הבונים החופשיים בצ\'יינה טאון.' },
        { name: ' לי צ\'ונלין', location: 'הונג קונג', lineage: 'וונג יוק-קונג', description: 'משמר את סגנון ה"בית הארוך" הרך של שושלת וונג יוק-קונג ומסורת ריקוד הקירין של בני ההאקה.' },
        { name: ' צ\'או צ\'ין צ\'ינג', location: 'הונג קונג', lineage: 'וונג יוק-קונג', description: 'ממשיך את המסורת המשפחתית דרך אביו, שהיה תלמידו של וונג יוק-קונג. מלמד באופן פעיל בהונג קונג.' }
      ]
    };

    // Timeline Generation
    const timelineContainer = document.getElementById('timeline-container');
    const timelineDetails = document.getElementById('timeline-details');

    timelineContainer.classList.add('py-4');
    const line = document.createElement('div');
    line.className = 'absolute top-0 left-4 md:left-1/2 md:-ml-[1px] h-full w-0.5 bg-stone-300';
    timelineContainer.appendChild(line);

    appData.timeline.forEach((item, index) => {
      const isEven = index % 2 === 0;
      const timelineItem = document.createElement('div');
      timelineItem.className = `relative mb-8`;

      const itemWrapper = document.createElement('div');
      itemWrapper.className = `md:flex items-center ${isEven ? 'md:flex-row-reverse' : ''}`;

      itemWrapper.innerHTML = `
                    <div class="md:w-1/2"></div>
                    <div class="absolute md:relative top-2 left-4 md:left-auto md:top-auto transform md:transform-none -translate-x-1/2 md:translate-x-0 z-10">
                         <div class="bg-red-900 shadow-xl w-8 h-8 rounded-full flex items-center justify-center">
                            <span class="text-white font-semibold text-lg">${index + 1}</span>
                        </div>
                    </div>
                    <div class="md:w-1/2">
                        <div class="bg-white rounded-lg shadow-xl p-4 ml-12 md:ml-0 cursor-pointer hover:shadow-2xl transition-shadow duration-300 ${isEven ? 'md:ml-8' : 'md:mr-8'}" data-index="${index}">
                            <h3 class="font-bold text-lg text-green-900">${item.year}</h3>
                            <p class="text-md font-semibold leading-tight">${item.title}</p>
                        </div>
                    </div>
                `;
      timelineItem.appendChild(itemWrapper);
      timelineContainer.appendChild(timelineItem);
    });

    document.querySelectorAll('#timeline-container [data-index]').forEach(item => {
      item.addEventListener('click', function() {
        const index = this.dataset.index;
        const data = appData.timeline[index];
        timelineDetails.innerHTML = `<h3 class="font-bold text-xl mb-2 text-green-900">${data.title} (${data.year})</h3><p class="text-stone-700">${data.content}</p>`;
        timelineDetails.style.opacity = '1';
      });
    });

    // Lineage Tree Generation
    const lineageTreeContainer = document.getElementById('lineage-tree');
    const lineageDetails = document.getElementById('lineage-details');

    lineageTreeContainer.innerHTML = `
                <div class="tree-node" data-id="som-dot">סוֹם דַאט</div>
                <div class="h-6 w-0.5 bg-stone-300"></div>
                <div class="tree-node" data-id="lee-siem-see">לִי סִיֵם סִי</div>
                <div class="h-6 w-0.5 bg-stone-300"></div>
                <div class="tree-node" data-id="cheung-yiu-chung">צ׳וּנְג יוּ צ׳וּנְג</div>
                <div class="h-6 w-0.5 bg-stone-300"></div>
                <div class="inline-flex flex-col items-center">
                    <div class="flex space-x">
                        <div class="tree-node" data-id="wong-yuk-kong">וונג יוק-קונג</div>
                        <div class="tree-node" data-id="lam-sang">לאם סאנג</div>
                    </div>
                    <div class="flex justify-center items-center space-x-4 mt-2">
                        <div class="w-1/2"></div> <!-- Spacer for Wong Yuk Kong's side -->
                        <div class="w-1/2 flex flex-col items-center space-y-2">
                             <div class="h-6 w-0.5 bg-stone-300"></div>
                             <div class="flex space-x">
                                <div class="tree-node" data-id="henry-poo-yee">הנרי פו יי</div>
                                <div class="tree-node" data-id="gin-foon-mark">ג׳ין פון מארק</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

    function findPerson(node, personId) {
      if (node.id === personId) return node;
      if (node.children) {
        for (const child of node.children) {
          const found = findPerson(child, personId);
          if (found) return found;
        }
      }
      return null;
    }

    document.querySelectorAll('.tree-node').forEach(node => {
      node.addEventListener('click', function(e) {
        e.stopPropagation();

        document.querySelectorAll('.tree-node.active').forEach(activeNode => {
          activeNode.classList.remove('active');
        });
        this.classList.add('active');

        const id = this.dataset.id;
        const person = findPerson(appData.lineage, id);

        if (person && person.details) {
          lineageDetails.innerHTML = `<h4 class="font-bold text-green-800 mb-2">${person.name}</h4><div class="text-stone-700 text-right">${person.details}</div>`;
          lineageDetails.style.opacity = '1';
        } else {
          lineageDetails.style.opacity = '0';
        }
      });
    });

    document.body.addEventListener('click', function(e) {
      if (!e.target.closest('#lineage-tree')) {
        document.querySelectorAll('.tree-node.active').forEach(activeNode => {
          activeNode.classList.remove('active');
        });
        lineageDetails.style.opacity = '0';
      }
    });


    // Principles Generation
    const principlesGrid = document.getElementById('principles-grid');
    appData.principles.forEach(p => {
      const card = document.createElement('div');
      card.className = 'bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col justify-between';
      card.innerHTML = `
                    <div>
                        <h3 class="font-bold text-xl mb-2 text-green-900">${p.title}</h3>
                        <p class="text-stone-600">${p.content}</p>
                    </div>
                `;
      principlesGrid.appendChild(card);
    });

    // Forms Tables
    const formsContainer = document.getElementById('forms-container');
    function createFormsTable(title, formsData) {
      const isFoundation = !!formsData[0].englishName;
      let tableHTML = `
                    <div class="mb-12">
                        <h3 class="text-2xl font-bold text-center mb-4 text-green-800">${title}</h3>
                        <div class="overflow-x-auto">
                            <table class="min-w-full bg-white shadow-md rounded-lg">
                                <thead class="bg-stone-200">
                                    <tr>
                                        ${isFoundation ? '<th class="py-3 px-6 text-right font-semibold text-sm text-stone-700 uppercase tracking-wider">שם</th>' : ''}
                                        <th class="py-3 px-6 text-right font-semibold text-sm text-stone-700 uppercase tracking-wider">${isFoundation ? '' : 'שם'}</th>
                                        <th class="py-3 px-6 text-right font-semibold text-sm text-stone-700 uppercase tracking-wider">תרגום מילולי</th>
                                        ${formsData[0].description ? '<th class="py-3 px-6 text-right font-semibold text-sm text-stone-700 uppercase tracking-wider hidden md:table-cell">תיאור</th>' : ''}
                                    </tr>
                                </thead>
                                <tbody class="text-stone-700">`;
      formsData.forEach((form, index) => {
        tableHTML += `
                        <tr class="border-b border-stone-200 ${index % 2 === 0 ? '' : 'bg-stone-50'}">
                            ${isFoundation ? `<td class="py-4 px-6 font-semibold">${form.name}</td>` : ''}
                            <td class="py-4 px-6 font-mono">${isFoundation ? form.englishName : form.name}</td>
                            <td class="py-4 px-6">${form.translation}</td>
                            ${form.description ? `<td class="py-4 px-6 hidden md:table-cell">${form.description}</td>` : ''}
                        </tr>`;
      });
      tableHTML += `</tbody></table></div></div>`;
      return tableHTML;
    }

    formsContainer.innerHTML += createFormsTable('תבניות יסוד', appData.forms.foundations);
    formsContainer.innerHTML += createFormsTable('שבעת האגרופים הקצרים (七套短捶)', appData.forms.shortHammers);
    formsContainer.innerHTML += createFormsTable('ששת האגרופים הארוכים (六套長捶)', appData.forms.longHammers);

    // Masters Generation
    const mastersGrid = document.getElementById('masters-grid');
    appData.masters.forEach(m => {
      const card = document.createElement('div');
      card.className = 'bg-white p-6 rounded-lg shadow-lg flex flex-col';
      card.innerHTML = `
                    <h3 class="font-bold text-xl mb-1 text-green-900">${m.name.includes('(') ? m.name : `מאסטר ${m.name}`}</h3>
                    <p class="text-sm font-semibold text-emerald-800 mb-2">${m.location} | שושלת: ${m.lineage}</p>
                    <p class="text-stone-600 flex-grow">${m.description}</p>
                `;
      mastersGrid.appendChild(card);
    });

    // Mobile Menu
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const svgs = mobileMenuButton.querySelectorAll('svg');
    mobileMenuButton.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
      svgs[0].classList.toggle('hidden');
      svgs[1].classList.toggle('hidden');
    });

    // Smooth scrolling & active nav link
    const navLinks = document.querySelectorAll('.nav-link');
    navLinks.forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const targetId = this.getAttribute('href');
        const targetElement = document.querySelector(targetId);
        if (targetElement) {
          window.scrollTo({
            top: targetElement.offsetTop - 64, // offset for sticky nav
            behavior: 'smooth'
          });
        }
        if(!mobileMenu.classList.contains('hidden') === false){
          mobileMenu.classList.add('hidden');
          svgs[0].classList.remove('hidden');
          svgs[1].classList.add('hidden');
        }
      });
    });

    const sections = document.querySelectorAll('main section');
    window.addEventListener('scroll', () => {
      let current = '';
      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        if (pageYOffset >= sectionTop - 70) {
          current = section.getAttribute('id');
        }
      });

      navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href').includes(current)) {
          link.classList.add('active');
        }
      });
    });
  });
</script>

</body>
</html>
